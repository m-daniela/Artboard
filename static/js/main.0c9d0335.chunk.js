(this.webpackJsonpartboard=this.webpackJsonpartboard||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),c=n(8),s=n.n(c),o=(n(15),n(16),n(3)),a=n(10),u=n(4),l=function e(t){var n=this;Object(u.a)(this,e),this.first=function(){return n.stack.length>0?n.stack[n.stack.length-1]:void 0},this.hasNext=function(){var e;return n.stack.length>0||void 0!==(null===(e=n.stack[n.stack.length-1])||void 0===e?void 0:e.getElements)},this.next=function(){if(n.hasNext()){var e=n.stack.pop();return n.visited.push(e),void 0!==(null===e||void 0===e?void 0:e.getElements)?e.getElements().forEach((function(e){return n.stack.push(e)})):(null===e||void 0===e?void 0:e.isDraggable())&&void 0!==(null===e||void 0===e?void 0:e.item.getElements)&&e.item.getElements().forEach((function(e){return n.stack.push(e)})),e}},this.parentOf=function(e){for(e=+e;n.hasNext();){var t=n.next();if(void 0!==t.getElements){if(t.getElements().filter((function(t){return+t.id===e})).length>0)return t}else if((null===t||void 0===t?void 0:t.isDraggable())&&void 0!==(null===t||void 0===t?void 0:t.item.getElements)){if(t.item.getElements().filter((function(t){return+t.id===e})).length>0)return t.item}}},this.visited=[],this.stack=t.reverse().slice(0,t.length)},d="ADD",f="DELETE",m=function(){return Math.floor(1e5*Math.random())},h=n(1),v=Object(i.createContext)(),b=function(e,t){switch(t.type){case d:return[].concat(Object(a.a)(e),[t.item]);case f:return e.filter((function(e){return+e.id!==+t.item}));default:return e}},j=function(e){var t=Object(i.useReducer)(b,[]),n=Object(o.a)(t,2),c=n[0],s=n[1],a=r.a.useState(null),u=Object(o.a)(a,2),d=u[0],f=u[1],m=r.a.useState(null),j=Object(o.a)(m,2),g=j[0],p=j[1];return Object(h.jsx)(v.Provider,{value:{elements:c,dispatch:s,selected:d,setSelected:f,getElement:function(e){var t=new l(c.slice(0,c.length)),n=t.first();if(+(null===n||void 0===n?void 0:n.id)===+e)return n;for(;t.hasNext();){var i=t.next();if(+i.id===+e)return i}},current:g,setCurrent:p,removeSelection:function(){g&&(g.classList.remove("selected"),f(null))}},children:e.children})},g=function(){var e=r.a.useContext(v),t=e.elements,n=e.setSelected,i=e.setCurrent,c=e.removeSelection;return Object(h.jsx)("div",{className:"board",onClick:function(e){var t=e.target;c(),"draggable"==t.parentNode.classList[0]&&(t=t.parentNode),i(t),"board"!=t.classList[0]&&t.classList.add("selected"),n(t.id)},children:t.map((function(e){return e.display()}))})},p=function e(t,n){var i=this;Object(u.a)(this,e),this.isDraggable=function(){return!1},this.getName=function(){return i.name},this.display=function(){return Object(h.jsx)("img",{src:i.url,className:"item",alt:"img",id:i.id},i.id)},this.id=t,this.url=n,this.name="Image"},O=function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Your notes...";Object(u.a)(this,e),this.isDraggable=function(){return!1},this.getName=function(){return n.name},this.display=function(){return Object(h.jsx)("textarea",{className:"item",id:n.id,onDoubleClick:function(e){return e.target.focus()},placeholder:n.text},n.id)},this.id=t,this.text=i,this.name="Note"},x=function e(t,n){var i=this;Object(u.a)(this,e),this.isDraggable=function(){return!1},this.getName=function(){return i.name},this.addElement=function(e){i.elements.push(e)},this.removeElement=function(e){i.elements=i.elements.filter((function(t){return+t.id!==+e}))},this.getElements=function(){return i.elements},this.display=function(){return Object(h.jsxs)("div",{className:"group item",id:i.id,children:[i.name,i.elements.map((function(e){return e.display()}))]},i.id)},this.id=t,this.name=""===n?"Group":n,this.elements=[]},k=function e(t,n){var i=this;Object(u.a)(this,e),this.isDraggable=function(){return!0},this.getName=function(){return i.name},this.display=function(){return Object(h.jsx)("div",{className:"draggable item",id:i.id,draggable:!0,onMouseOver:function(){return i.drag(i.id)},children:i.item.display()},i.id)},this.drag=function(e){var t=document.getElementById(e),n=0,i=0,r=0,c=0,s=function(e){e.preventDefault(),n=r-e.clientX,i=c-e.clientY,r=e.clientX,c=e.clientY,t.style.top=t.offsetTop-i+"px",t.style.left=t.offsetLeft-n+"px"},o=function(){document.onmouseup=null,document.onmousemove=null};t.onmousedown=function(e){e.preventDefault(),r=e.clientX,c=e.clientY,document.onmouseup=o,document.onmousemove=s}},this.id=t,this.item=n,this.name="Draggable ".concat(n.name)},E=function(e){var t=m(),n=m(),i=new p(t,e);return new k(n,i)},D=function(){var e=m(),t=m(),n=new O(e,"Your notes (double click to activate)...");return new k(t,n)},y=function(e){var t=m(),n=m(),i=new x(t,e);return new k(n,i)},N=function(e){var t=m();return new p(t,e)},S=function(){var e=m();return new O(e)},C=function(e){var t=m();return new x(t,e)},w=n(9),L=function(){var e=r.a.useContext(v),t=e.dispatch,n=e.selected,i=e.setSelected,c=e.getElement,s=e.elements,a=e.removeSelection,u=r.a.useState(""),m=Object(o.a)(u,2),b=m[0],j=m[1],g=r.a.useState(""),p=Object(o.a)(g,2),O=p[0],x=p[1],k=r.a.useState(""),L=Object(o.a)(k,2),I=L[0],Y=L[1],_=r.a.useState(""),F=Object(o.a)(_,2),M=F[0],P=F[1],T=r.a.useState(""),B=Object(o.a)(T,2),G=B[0],R=B[1],X=0===n;r.a.useEffect((function(){if(0!==n&&void 0!==n){var e=c(n);R(e)}}),[n,c]);var q=function(e){if(n){if(void 0!==(null===G||void 0===G?void 0:G.elements))G.addElement(e);else if((null===G||void 0===G?void 0:G.isDraggable())&&void 0!==(null===G||void 0===G?void 0:G.item.elements)){var r;null===(r=G.item)||void 0===r||r.addElement(e)}else t({type:d,item:e});a(),i(null)}else t({type:d,item:e}),i(null)};return Object(h.jsxs)("div",{className:"side",children:[Object(h.jsxs)("form",{children:[Object(h.jsx)("button",{onClick:function(e){return function(e){e.preventDefault();var t=document.querySelector(".board"),n=document.querySelector("#save_board");a(),w.a(t).then((function(e){P(e),n.click()})).catch((function(e){return console.log(e)}))}(e)},children:"Save board"}),Object(h.jsx)("a",{id:"save_board",href:M,download:"board.png",hidden:!0,children:"Click to save"})]}),Object(h.jsxs)("form",{className:"remove",onSubmit:function(e){return e.preventDefault()},children:[Object(h.jsxs)("span",{children:[null===G||void 0===G?void 0:G.name," ",n]}),Object(h.jsx)("button",{onClick:function(){try{var e=new l(s.slice(0,s.length)).parentOf(n);console.log(e),void 0!==e?e.removeElement(n):(console.log("elems",s),t({type:f,item:n})),i(null)}catch(r){console.log(r)}},disabled:X,children:"Delete"})]}),Object(h.jsxs)("form",{className:"add_image",onSubmit:function(e){return e.preventDefault()},children:[Object(h.jsx)("button",{onClick:function(){if(""!==b){var e=N(b);q(e),j(""),Y("")}else Y("Please provide an URL")},children:"Image"}),Object(h.jsx)("button",{onClick:function(){var e=E(b);t({type:d,item:e}),j("")},children:"Draggable image"}),Object(h.jsxs)("label",{children:["URL",Object(h.jsx)("input",{type:"text",onChange:function(e){return j(e.target.value)},value:b})]}),Object(h.jsx)("span",{children:I})]}),Object(h.jsxs)("form",{className:"add_note",onSubmit:function(e){return e.preventDefault()},children:[Object(h.jsx)("button",{onClick:function(){var e=S();q(e)},children:"Note"}),Object(h.jsxs)("button",{onClick:function(){var e=D();t({type:d,item:e})},children:["Draggable note ",Object(h.jsx)("br",{})]})]}),Object(h.jsxs)("form",{className:"add_group",onSubmit:function(e){return e.preventDefault()},children:[Object(h.jsx)("button",{onClick:function(){var e=C(O);q(e),x("")},children:"Group"}),Object(h.jsx)("button",{onClick:function(){var e=y(O);t({type:d,item:e})},children:"Draggable group"}),Object(h.jsxs)("label",{children:["Group name",Object(h.jsx)("input",{type:"text",onChange:function(e){return x(e.target.value)},value:O})]})]})]})};var I=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(j,{children:[Object(h.jsx)(g,{}),Object(h.jsx)(L,{})]})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),i(e),r(e),c(e),s(e)}))};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(I,{})}),document.getElementById("root")),Y()}},[[19,1,2]]]);
//# sourceMappingURL=main.0c9d0335.chunk.js.map